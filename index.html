<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="./css/reset.css" media="screen" />
  <link href="https://fonts.googleapis.com/css?family=Space+Mono:400,700" rel="stylesheet">
  <title >JS info:</title>
</head>
<body onresize="drawPage()">

  <div id="displayB">
    <span id="displayBtext">35_characters______________________</span>
  </div>
  <div id="displayA">
    <span id="displayAtext">17_characters__</span>
  </div>
  <div id="keyboard">
  </div>

<script>
function updateText() {
  if (layout === "portrait") {
    if (mobile === false) {
      displayBtext.innerHTML = "mode: portrait (r) mobile: false___";
    } else {
      displayBtext.innerHTML = "mode: portrait (r) mobile: true____";
    }
  } else if (layout === "landscape") {
    if (mobile === false) {
      displayBtext.innerHTML = "mode: landscape (r) mobile: false__";
    } else {
      displayBtext.innerHTML = "mode: landscape (r) mobile: true___";
    }
  } else {
    if (mobile === false) {
      displayBtext.innerHTML = "mode: landscape-L (r) mobile: false";
    } else {
      displayBtext.innerHTML = "mode: landscape-L (r) mobile: true_";
    }
  }
}

function getDisplayData() {
  winInW = window.innerWidth;
  WinOutW = window.outerWidth;
  screenW = screen.width;
  winInH = window.innerHeight;
  WinOutH = window.outerHeight;
  screenH = screen.height;
  winRatio = window.innerWidth / window.innerHeight;
  if (screen.width < window.innerWidth) {
    mobile = true;
  } else {mobile = false;}
}

function setLayout() {
  if (winRatio < 1.2) {
    portrait();
    layout = "portrait";
  } else if (winRatio >= 1.2 && winRatio < 2.1) {layout = "landscape";}
  else {layout = "landscapeLong";}
}

function drawPage() {
  getDisplayData();
  setLayout();
  destroyKeys();
  displayB.style.height= `${displayBheight}px`;
  displayA.style.height= `${displayAheight}px`;
  keyboard.style.height= `${keyboardHeight}px`;

  displayB.style.lineHeight = `${displayBheight}px`;
  displayBtext.style.display = "inline-block";
  displayBtext.style.verticalAlign = "middle";
  displayBtext.style.lineHeight = "normal";

  displayA.style.lineHeight = `${displayAheight}px`;
  displayAtext.style.display = "inline-block";
  displayAtext.style.verticalAlign = "middle";
  displayAtext.style.lineHeight = "normal";

  // ------------------ need to adjust for theme -----------
  displayAtext.style.fontSize = `${fontSizeA}px`;
  displayBtext.style.fontSize = `${fontSizeB}px`;
  // -------------------------------------------------------

  updateText();
  createKeys();
}

function createKeys() {
  document.getElementById('keyboard').style.gridAutoRows = `${gridRowHeight}px`;
  document.getElementById('keyboard').style.gridTemplateColumns = gridColumns;
  for (let i = 0; i < numOfKeys; i++) {
    const key = document.createElement('div');
    key.classList.add('key');
    key.id = i.toString();
    key.style.backgroundColor = "#20272d";
    key.style.border = "1px solid #414e58";

    keyboard.appendChild(key);

    const keyID = document.createElement('p');
    keyID.classList.add('keyID');
    keyID.id = `keyID${i}`;

    key.appendChild(keyID);
  }
  for (let i = 0; i < numOfKeys; i++) {
    document.getElementById(`keyID${i}`).innerHTML = `${i}`;
    document.getElementById(`keyID${i}`).style.color = "#414e58";
  }
}

function destroyKeys() {
  let elements = document.getElementsByClassName('key');
  while(elements.length > 0){
      elements[0].parentNode.removeChild(elements[0]);
  }
}

function portrait() {
  displayBheight = winInH / 15;
  displayAheight = winInH / 7;
  keyboardHeight = winInH - displayAheight - displayBheight;
  fontSizeA = displayAheight * winRatio / 1.4;
  fontSizeB = displayBheight * winRatio / 1.6;
  gridRowHeight = keyboardHeight / 6;
  gridColumns = `repeat(4, 1fr)`;
  numOfKeys = 24;
}

let winInW = 0;
let WinOutW = 0;
let screenW = 0;
let winInH = 0;
let WinOutH = 0;
let screenH = 0;
let winRatio = 0;
let mobile = false;
let layout = "portrait"; // 3 options: portrait, landscape, landscapeLong
let hand = "right";

let displayAheight = 0;
let displayBheight = 0;
let keyboardHeight = 0;

let fontSizeA = 0;
let fontSizeB = 0;

let gridRowHeight = 0;
let gridColumns = 0;
let numOfKeys = 0;

let body = document.getElementsByTagName('body')[0];
let para = document.getElementsByTagName('p')[0];
let displayA = document.getElementById('displayA');
let displayB = document.getElementById('displayB');
let displayAtext = document.getElementById('displayAtext');
let keyboard = document.getElementById('keyboard');

body.style.color = "#c0daf1";
body.style.backgroundColor = "#1e272f";
body.style.fontFamily = "'Space+Mono', monospace";

displayB.style.backgroundColor = "#20272d";
displayB.style.textAlign = "right";

displayA.style.backgroundColor = "black";
displayA.style.textAlign = "right";

keyboard.style.backgroundColor = "#11443f";

keyboard.style.display = "grid";
keyboard.style.margin = "auto";

drawPage();

</script>

</body>
</html>
